function images_search(a){globalRefreshURL=$("#image-search-form").attr("action")+"?"+a,globalRefreshDivId="#images-table",$.get(globalRefreshURL,function(a){$("#images-table").html(a)})}function image_update_table(a){globalRefreshURL=a,globalRefreshDivId="#images-table",$.get(a,function(a){$("#images-table").html(a)})}function image_edit(){var a=$("#image-edit-form").serialize();$.ajax({url:$("#image-edit-form").attr("action")+".xml",type:"POST",data:a,success:function(a){id=$("id",a).text(),$("#td-imagename-"+id).html($("imagename",a).text()),$("#image-dialog").dialog("close"),$("#image-dialog").dialog("destroy")},error:function(a){$("#image-edit-error-messages").css("display","inline"),err_html="<ul>",$("error",a.responseXML).each(function(){err_html+="<li>"+$(this).text()+"</li>"}),err_html+="</ul>",$("#image-edit-error-messages-content").html(err_html)}})}function image_selectors(){$("#images-sync-link").button({icons:{primary:"ui-icon-circle-plus"}}),$(".images-sync").click(function(a){a.preventDefault(),$.post($(this).attr("href"),function(a){refreshDiv(),alert("Image sync scheduled.")})})}function image_table_selectors(){$(".image-paginate > a").click(function(a){a.preventDefault(),image_update_table($(this).attr("href"))}),$(".image-sort-link").click(function(a){a.preventDefault(),image_update_table($(this).attr("href"))}),$(".image-show").click(function(a){a.preventDefault(),$.get($(this).attr("href"),function(a){$("#image-dialog").html(a),$("#image-dialog").dialog({modal:!0,height:400,width:600,buttons:{Ok:function(){$(this).dialog("close"),$(this).dialog("destroy")}}})})}),$(".image-edit").click(function(a){a.preventDefault(),$.get($(this).attr("href"),function(a){$("#image-dialog").html(a),$("#image-dialog").dialog({modal:!0,height:400,width:600,buttons:{Save:function(){image_edit()}}})})}),$(".image-delete").click(function(a){a.preventDefault();if(!confirm("Delete image?"))return;$.ajax({url:$(this).attr("href")+".xml",type:"POST",data:{_method:"delete"},success:function(a){refreshDiv()},error:function(a){alert("Error: Failed to delete record.")}})})}function server_group_selectors(){$("#server-group-new-link").button({icons:{primary:"ui-icon-circle-plus"}}),$(".server-group-create").click(function(a){a.preventDefault(),$.get($(this).attr("href"),function(a){$("#server-group-dialog").html(a),$("#server-group-dialog").dialog({modal:!0,height:515,width:700,buttons:{Create:function(){create_server_group()}}})})})}function server_group_table_selectors(){$(".servergroup-paginate a").click(function(a){a.preventDefault(),globalRefreshURL=$(this).attr("href"),globalRefreshDivId="#server_groups",$.get($(this).attr("href"),function(a){$("#server_groups").html(a)})}),$(".server-group-delete").click(function(a){a.preventDefault();if(!confirm("Delete group?"))return;$.ajax({url:$(this).attr("href")+".xml",type:"POST",data:{_method:"delete"},success:function(a){id=$("id",a).text(),$("#server-group-tr-"+id).remove()},error:function(a){alert("Error: Failed to delete record.")}})})}function create_server_group_add_row(){var a=parseInt($("#server-group-create-form-row-count").attr("value"));a++,$("#server-group-create-form-row-count").attr("value",""+a);var b=$("#create-server-group-table tr:nth-child(2)"),c=b.find("td:nth-child(3) select").html(),d=b.find("td:nth-child(4) select").html(),e=$("#server-group-create-account-input").attr("value");tr_html='<tr class="tr'+a%2+'">',tr_html+='<td><button class="create-server-group-delete-button">Delete</button></td>',tr_html+='<td><input type="text" value="" name="server_group[servers_attributes]['+a+'][name]" />',tr_html+='<input type="hidden" value="N/A" name="server_group[servers_attributes]['+a+'][description]" />',tr_html+='<input type="hidden" value="'+e+'" name="server_group[servers_attributes]['+a+'][account_id]" />',tr_html+="</td>",tr_html+='<td><select name="server_group[servers_attributes]['+a+'][image_id]">'+c+"</select></td>",tr_html+='<td><select name="server_group[servers_attributes]['+a+'][flavor_id]">'+d+"</select></td>",tr_html+="<td>&nbsp;</td>",tr_html+="</tr>",$("#create-server-group-table tr:last").after(tr_html),$(".create-server-group-delete-button").button({icons:{primary:"ui-icon-circle-close"},text:!1}),$(".create-server-group-delete-button").click(function(a){a.preventDefault(),$(this).parent().parent().remove()})}function create_server_group(){var a=$("#server-group-create-form").serialize();$.ajax({url:$("#server-group-create-form").attr("action"),type:"POST",data:a,dataType:"html",success:function(a){id=$("id",a).text(),$("#server-group-dialog").html(""),$("#server-group-dialog").dialog("close"),$("#server-group-dialog").dialog("destroy"),$("#tabs").tabs("load",0)},error:function(a){$("#server-group-error-messages").css("display","inline"),err_html="<ul>",$("error",a.responseXML).each(function(){err_html+="<li>"+$(this).text()+"</li>"}),err_html+="</ul>",$("#server-group-error-messages-content").html(err_html)}})}function server_history_update_table(a){globalRefreshURL=a,globalRefreshDivId="#server-history-table",$.get(a,function(a){$("#server-history-table").html(a)})}function server_history_selectors(){$("#server-history-errors-dialog").dialog({autoOpen:!1,modal:!0,height:250,width:300,buttons:{Close:function(){$(this).dialog("close")}}})}function server_history_table_selectors(){$(".server-history-paginate a").click(function(a){a.preventDefault(),server_history_update_table($(this).attr("href"))}),$(".server-history-sort-link").click(function(a){a.preventDefault(),server_history_update_table($(this).attr("href"))}),$(".show-server-history-errors").click(function(a){a.preventDefault(),id=(a.target+"").replace(/.*:.*\//,""),$("#server-history-errors-dialog").dialog("open"),$.get("/server_errors.xml?server_id="+id,function(a){dialog_html="<b>Server Errors:</b><ul>",$("server-error",a).each(function(a){dialog_html+="<li>"+$(this).find("error-message").text()+"</li>"}),dialog_html+="</ul>",$("#server-history-errors-dialog").html(dialog_html)})})}function server_update_table(a){globalRefreshURL=a,globalRefreshDivId="#servers-table",$.get(a,function(a){$("#servers-table").html(a)})}function server_selectors(){$("#server-errors-dialog").dialog({autoOpen:!1,modal:!0,height:250,width:300,buttons:{Close:function(){$(this).dialog("close")}}}),$("#server_group_select").change(function(){$("#server_group_select").attr("name")!==undefined&&(server_group_id=document.form_server_group_servers.elements.server_group_id.value,server_update_table("/servers?server_group_id="+server_group_id))})}function server_table_selectors(){$(".server-paginate a").click(function(a){a.preventDefault(),server_update_table($(this).attr("href"))}),$(".server-sort-link").click(function(a){a.preventDefault(),server_update_table($(this).attr("href"))}),$(".show-server-errors").click(function(a){a.preventDefault(),id=(a.target+"").replace(/.*:.*\//,""),$("#server-errors-dialog").dialog("open"),$.get("/server_errors.xml?server_id="+id,function(a){dialog_html="<b>Server Errors:</b><ul>",$("server-error",a).each(function(a){dialog_html+="<li>"+$(this).find("error-message").text()+"</li>"}),dialog_html+="</ul>",$("#server-errors-dialog").html(dialog_html)})})}function users_search(a){globalRefreshURL=$("#user-search-form").attr("action")+"?"+a,globalRefreshDivId="#users-table",$.get(globalRefreshURL,function(a){$("#users-table").html(a)})}function user_update_table(a){globalRefreshURL=a,globalRefreshDivId="#users-table",$.get(a,function(a){$("#users-table").html(a)})}function user_edit(){var a=$("#user-edit-form").serialize();$.ajax({url:$("#user-edit-form").attr("action")+".xml",type:"POST",data:a,success:function(a){id=$("id",a).text(),$("#td-username-"+id).html($("username",a).text()),$("#user-dialog").dialog("close"),$("#user-dialog").dialog("destroy")},error:function(a){$("#user-edit-error-messages").css("display","inline"),err_html="<ul>",$("error",a.responseXML).each(function(){err_html+="<li>"+$(this).text()+"</li>"}),err_html+="</ul>",$("#user-edit-error-messages-content").html(err_html)}})}function user_password(){var a=$("#user-password-form").serialize();$.ajax({url:$("#user-password-form").attr("action")+".xml",type:"POST",data:a,success:function(a){$("#user-dialog").dialog("close"),$("#user-dialog").dialog("destroy")},error:function(a){$("#user-password-error-messages").css("display","inline"),err_html="<ul>",$("error",a.responseXML).each(function(){err_html+="<li>"+$(this).text()+"</li>"}),err_html+="</ul>",$("#user-password-error-messages-content").html(err_html)}})}function user_create(){var a=$("#user-create-form").serialize();$.ajax({url:$("#user-create-form").attr("action")+".xml",type:"POST",data:a,dataType:"xml",success:function(a){id=$("id",a).text(),$("#user-dialog").dialog("close"),$("#user-dialog").dialog("destroy"),$(location).attr("href","/main")},error:function(a){$("#user-new-error-messages").css("display","inline"),err_html="<ul>",$(a.responseXML).find("error").each(function(){err_html+="<li>"+$(this).text()+"</li>"}),err_html+="</ul>",$("#user-new-error-messages-content").html(err_html)}})}function user_selectors(){$("#user-new-link").button({icons:{primary:"ui-icon-circle-plus"}}),$(".user-create").click(function(a){a.preventDefault(),$.get($(this).attr("href"),function(a){$("#user-dialog").html(a),$("#user-dialog").dialog({modal:!0,height:400,width:600,buttons:{Save:function(){user_create()}}})})})}function user_table_selectors(){$(".user-paginate > a").click(function(a){a.preventDefault(),user_update_table($(this).attr("href"))}),$(".user-sort-link").click(function(a){a.preventDefault(),user_update_table($(this).attr("href"))}),$(".user-show").click(function(a){a.preventDefault(),$.get($(this).attr("href"),function(a){$("#user-dialog").html(a),$("#user-dialog").dialog({modal:!0,height:400,width:600,buttons:{Ok:function(){$(this).dialog("close"),$(this).dialog("destroy")}}})})}),$(".user-edit").click(function(a){a.preventDefault(),$.get($(this).attr("href"),function(a){$("#user-dialog").html(a),$("#user-dialog").dialog({modal:!0,height:400,width:600,buttons:{Save:function(){user_edit()}}})})}),$(".user-password").click(function(a){a.preventDefault(),$.get($(this).attr("href"),function(a){$("#user-dialog").html(a),$("#user-dialog").dialog({modal:!0,height:400,width:600,buttons:{Save:function(){user_password()}}})})}),$(".user-delete").click(function(a){a.preventDefault();if(!confirm("Delete user?"))return;$.ajax({url:$(this).attr("href")+".xml",type:"POST",data:{_method:"delete"},success:function(a){id=$("id",a).text(),$("#tr-user-"+id).remove()},error:function(a){alert("Error: Failed to delete record.")}})})}